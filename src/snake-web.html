<!doctype html>
<html>
    <head>
        <title>Kits 4 Kids | Snake Game</title>
        <link rel="stylesheet" href="nav.css" />
        <link rel="stylesheet" href="index.css" />
        <link rel="icon" type="image/png" href="../favicon.png" />
        <style>
            #gameContainer {
                display: flex;
                flex-direction: column;
                align-items: center;
                margin-top: 20px;
            }

            #gameCanvas {
                border: 3px solid #07374f;
                background-color: #000;
                margin: 10px;
            }

            #gameControls {
                margin: 10px;
                text-align: center;
            }

            .controlBtn {
                background-color: #b1cab5;
                border: 2px solid #07374f;
                color: #07374f;
                padding: 10px 20px;
                margin: 5px;
                font-size: 16px;
                cursor: pointer;
                border-radius: 5px;
                font-family: 'Sour Gummy', sans-serif;
            }

            .controlBtn:hover {
                background-color: #d2e7d6;
            }

            #score {
                font-size: 24px;
                color: #07374f;
                margin: 10px;
                font-family: 'Delius Swash Caps', cursive;
            }

            #instructions {
                max-width: 600px;
                margin: 20px;
                padding: 15px;
                background-color: rgba(177, 202, 181, 0.3);
                border-radius: 10px;
                border: 1px solid #07374f;
            }

            .gameOver {
                color: #d32f2f;
                font-size: 28px;
                font-weight: bold;
                text-align: center;
                margin: 20px;
            }
        </style>
    </head>
    <body>
        <nav>
            <ul>
                <a class="navi" href="../index.html">Home</a>
                <a class="navi" href="about.html">About</a>
                <a class="navi" href="history.html">History</a>
                <a class="navi" href="contact.html">Contact</a>
                <a class="navi active" href="snake-web.html">Snake</a>
            </ul>
        </nav>

        <p id="header">Snake Game</p>
        <p id="intro">A web-based implementation of the classic Snake game</p>

        <div id="gameContainer">
            <div id="score">Score: 0</div>

            <canvas id="gameCanvas" width="400" height="400"></canvas>

            <div id="gameControls">
                <button class="controlBtn" onclick="startGame()">
                    Start Game
                </button>
                <button class="controlBtn" onclick="pauseGame()">Pause</button>
                <button class="controlBtn" onclick="resetGame()">Reset</button>
            </div>

            <div id="instructions">
                <p id="intro"><strong>How to Play:</strong></p>
                <p id="intro">• Use WASD or Arrow keys to control the snake</p>
                <p id="intro">
                    • Eat the red food to grow and increase your score
                </p>
                <p id="intro">• Don't hit the walls or your own tail!</p>
                <p id="intro">• Try to get the highest score possible</p>
            </div>
        </div>

        <script>
            const canvas = document.getElementById('gameCanvas')
            const ctx = canvas.getContext('2d')
            const scoreElement = document.getElementById('score')

            // Game variables
            const gridSize = 20
            const tileCount = canvas.width / gridSize

            let snake = [{ x: 10, y: 10 }]
            let food = {}
            let dx = 0
            let dy = 0
            let score = 0
            let gameRunning = false
            let gameLoop

            // Initialize game
            function init() {
                createFood()
                gameRunning = false
                drawGame()
            }

            // Create food at random position
            function createFood() {
                food = {
                    x: Math.floor(Math.random() * tileCount),
                    y: Math.floor(Math.random() * tileCount),
                }

                // Make sure food doesn't spawn on snake
                for (let segment of snake) {
                    if (segment.x === food.x && segment.y === food.y) {
                        createFood()
                        return
                    }
                }
            }

            // Draw everything
            function drawGame() {
                // Clear canvas
                ctx.fillStyle = 'black'
                ctx.fillRect(0, 0, canvas.width, canvas.height)

                // Draw snake
                ctx.fillStyle = 'lime'
                for (let segment of snake) {
                    ctx.fillRect(
                        segment.x * gridSize,
                        segment.y * gridSize,
                        gridSize - 2,
                        gridSize - 2
                    )
                }

                // Draw food
                ctx.fillStyle = 'red'
                ctx.fillRect(
                    food.x * gridSize,
                    food.y * gridSize,
                    gridSize - 2,
                    gridSize - 2
                )
            }

            // Update game state
            function update() {
                if (!gameRunning) return

                const head = { x: snake[0].x + dx, y: snake[0].y + dy }

                // Check wall collision
                if (
                    head.x < 0 ||
                    head.x >= tileCount ||
                    head.y < 0 ||
                    head.y >= tileCount
                ) {
                    gameOver()
                    return
                }

                // Check self collision
                for (let segment of snake) {
                    if (head.x === segment.x && head.y === segment.y) {
                        gameOver()
                        return
                    }
                }

                snake.unshift(head)

                // Check food collision
                if (head.x === food.x && head.y === food.y) {
                    score += 10
                    scoreElement.textContent = `Score: ${score}`
                    createFood()
                } else {
                    snake.pop()
                }

                drawGame()
            }

            // Start game
            function startGame() {
                if (gameRunning) return

                gameRunning = true
                gameLoop = setInterval(update, 150)

                // Remove any game over message
                const gameOverMsg = document.querySelector('.gameOver')
                if (gameOverMsg) {
                    gameOverMsg.remove()
                }
            }

            // Pause game
            function pauseGame() {
                gameRunning = false
                if (gameLoop) {
                    clearInterval(gameLoop)
                }
            }

            // Reset game
            function resetGame() {
                pauseGame()
                snake = [{ x: 10, y: 10 }]
                dx = 0
                dy = 0
                score = 0
                scoreElement.textContent = 'Score: 0'
                createFood()
                drawGame()
            }

            // Game over
            function gameOver() {
                pauseGame()

                // Add game over message
                const gameContainer = document.getElementById('gameContainer')
                const gameOverDiv = document.createElement('div')
                gameOverDiv.className = 'gameOver'
                gameOverDiv.textContent = `Game Over! Final Score: ${score}`
                gameContainer.insertBefore(
                    gameOverDiv,
                    document.getElementById('gameControls')
                )
            }

            // Handle keyboard input
            document.addEventListener('keydown', (e) => {
                if (!gameRunning) return

                // Prevent reverse direction
                switch (e.key) {
                    case 'ArrowUp':
                    case 'w':
                    case 'W':
                        if (dy !== 1) {
                            dx = 0
                            dy = -1
                        }
                        break
                    case 'ArrowDown':
                    case 's':
                    case 'S':
                        if (dy !== -1) {
                            dx = 0
                            dy = 1
                        }
                        break
                    case 'ArrowLeft':
                    case 'a':
                    case 'A':
                        if (dx !== 1) {
                            dx = -1
                            dy = 0
                        }
                        break
                    case 'ArrowRight':
                    case 'd':
                    case 'D':
                        if (dx !== -1) {
                            dx = 1
                            dy = 0
                        }
                        break
                }
            })

            // Initialize the game when page loads
            init()
        </script>
    </body>
</html>
