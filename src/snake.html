<!doctype html>
<html>
    <head>
        <title>Kits 4 Kids | Snake</title>

        <link rel="stylesheet" href="nav.css" />
        <link rel="stylesheet" href="index.css" />

        <script src="https://js-dos.com/6.22/current/js-dos.js"></script>
        <style>
            body {
                margin: 0;
                background: #c2daf5;
            }
            #dosbox {
                width: 80vw;
                height: 60vh;
                margin: auto;
            }
        </style>
    </head>
    <body>
        <nav>
            <ul>
                <a class="navi" href="../index.html">Home</a>
                <a class="navi" href="about.html">About</a>
                <a class="navi" href="history.html">History</a>
                <a class="navi" href="contact.html">Contact</a>
                <a class="navi active" href="snake.html">Snake</a>
            </ul>
        </nav>

        <p id="header">Snake Games</p>
        <p id="intro" style="padding: 0px 25px 0px 25px">
            Choose your snake game version:
        </p>

        <div style="text-align: center; margin: 20px">
            <a
                href="snake-web.html"
                style="
                    display: inline-block;
                    background-color: #b1cab5;
                    color: #07374f;
                    padding: 15px 30px;
                    text-decoration: none;
                    border-radius: 8px;
                    font-size: 18px;
                    font-family: 'Sour Gummy', sans-serif;
                    border: 2px solid #07374f;
                    margin: 10px;
                "
            >
                Play Web Version
            </a>
        </div>

        <p id="intro" style="padding: 0px 25px 0px 25px; font-size: 16px">
            Assembly version (DOS emulation):
        </p>

        <div id="dosbox"></div>
        <script>
            Dos(document.getElementById('dosbox'), {
                wdosboxUrl: 'https://js-dos.com/6.22/current/wdosbox.js',
            }).ready(async (fs, main) => {
                try {
                    const response = await fetch('./snake.zip')
                    if (!response.ok)
                        throw new Error(`Fetch failed: ${response.status}`)
                    const arrayBuffer = await response.arrayBuffer()
                    await fs.extract(new Uint8Array(arrayBuffer))
                    main(['-c', 'snake.exe']).catch((e) => {
                        console.error('Failed to run snake.exe:', e)
                        document.getElementById('dosbox').innerHTML =
                            '<p style="color: #07374f; text-align: center; font-size: 16px; padding: 20px; background-color: rgba(177, 202, 181, 0.3); border-radius: 8px; margin: 20px;">Assembly snake game requires a compiled executable. Currently showing a basic DOS program. For the full game experience, <a href="snake-web.html" style="color: #07374f; text-decoration: underline;">try the web version</a>.</p>'
                    })
                } catch (e) {
                    console.error('Failed to load snake game:', e)
                    document.getElementById('dosbox').innerHTML =
                        '<p style="color: #07374f; text-align: center; font-size: 16px; padding: 20px; background-color: rgba(177, 202, 181, 0.3); border-radius: 8px; margin: 20px;">Assembly version unavailable. <a href="snake-web.html" style="color: #07374f; text-decoration: underline;">Play the web version instead</a>.</p>'
                }
            })
        </script>
    </body>
</html>
